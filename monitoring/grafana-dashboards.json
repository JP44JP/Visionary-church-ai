{
  "dashboards": [
    {
      "dashboard": {
        "id": null,
        "title": "VisionaryChurch-AI Platform Overview",
        "tags": ["visionary-church", "overview"],
        "timezone": "browser",
        "schemaVersion": 30,
        "version": 1,
        "refresh": "30s",
        "time": {
          "from": "now-1h",
          "to": "now"
        },
        "timepicker": {
          "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]
        },
        "panels": [
          {
            "id": 1,
            "title": "System Health Status",
            "type": "stat",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
            "targets": [
              {
                "expr": "church_health_check_success{service=\"api\"}",
                "refId": "A",
                "legendFormat": "API Health"
              },
              {
                "expr": "church_health_check_success{service=\"database\"}",
                "refId": "B",
                "legendFormat": "Database Health"
              },
              {
                "expr": "church_health_check_success{service=\"cache\"}",
                "refId": "C",
                "legendFormat": "Cache Health"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [
                  {
                    "options": {
                      "0": {"text": "Unhealthy", "color": "red"},
                      "1": {"text": "Healthy", "color": "green"}
                    },
                    "type": "value"
                  }
                ],
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": null},
                    {"color": "green", "value": 1}
                  ]
                }
              }
            }
          },
          {
            "id": 2,
            "title": "Request Rate",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
            "targets": [
              {
                "expr": "sum(rate(http_requests_total{job=\"church-api\"}[5m])) by (method)",
                "refId": "A",
                "legendFormat": "{{method}}"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {"mode": "palette-classic"},
                "custom": {
                  "axisLabel": "Requests/sec",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {"legend": false, "tooltip": false, "vis": false},
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {"type": "linear"},
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {"group": "A", "mode": "none"},
                  "thresholdsStyle": {"mode": "off"}
                }
              }
            }
          },
          {
            "id": 3,
            "title": "Response Time Percentiles",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
            "targets": [
              {
                "expr": "histogram_quantile(0.50, rate(http_request_duration_seconds_bucket{job=\"church-api\"}[5m]))",
                "refId": "A",
                "legendFormat": "p50"
              },
              {
                "expr": "histogram_quantile(0.95, rate(http_request_duration_seconds_bucket{job=\"church-api\"}[5m]))",
                "refId": "B",
                "legendFormat": "p95"
              },
              {
                "expr": "histogram_quantile(0.99, rate(http_request_duration_seconds_bucket{job=\"church-api\"}[5m]))",
                "refId": "C",
                "legendFormat": "p99"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {"mode": "palette-classic"},
                "custom": {
                  "axisLabel": "Seconds",
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "lineWidth": 2
                }
              }
            }
          },
          {
            "id": 4,
            "title": "Error Rate by Status Code",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
            "targets": [
              {
                "expr": "sum(rate(http_requests_total{job=\"church-api\",code=~\"4..\"}[5m])) by (code)",
                "refId": "A",
                "legendFormat": "4xx - {{code}}"
              },
              {
                "expr": "sum(rate(http_requests_total{job=\"church-api\",code=~\"5..\"}[5m])) by (code)",
                "refId": "B",
                "legendFormat": "5xx - {{code}}"
              }
            ]
          },
          {
            "id": 5,
            "title": "Database Performance",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 16},
            "targets": [
              {
                "expr": "pg_stat_activity_count{state=\"active\"}",
                "refId": "A",
                "legendFormat": "Active Connections"
              },
              {
                "expr": "rate(pg_stat_database_xact_commit[5m])",
                "refId": "B",
                "legendFormat": "Transactions/sec"
              },
              {
                "expr": "rate(pg_stat_database_tup_returned[5m])",
                "refId": "C",
                "legendFormat": "Rows Read/sec"
              }
            ]
          },
          {
            "id": 6,
            "title": "Cache Hit Rate",
            "type": "stat",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 16},
            "targets": [
              {
                "expr": "redis_keyspace_hits_total / (redis_keyspace_hits_total + redis_keyspace_misses_total) * 100",
                "refId": "A",
                "legendFormat": "Cache Hit Rate %"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": null},
                    {"color": "yellow", "value": 80},
                    {"color": "green", "value": 90}
                  ]
                },
                "unit": "percent"
              }
            }
          }
        ]
      }
    },
    {
      "dashboard": {
        "id": null,
        "title": "Business Metrics Dashboard",
        "tags": ["visionary-church", "business"],
        "timezone": "browser",
        "schemaVersion": 30,
        "version": 1,
        "refresh": "1m",
        "time": {
          "from": "now-24h",
          "to": "now"
        },
        "panels": [
          {
            "id": 1,
            "title": "Active Conversations (24h)",
            "type": "stat",
            "gridPos": {"h": 6, "w": 6, "x": 0, "y": 0},
            "targets": [
              {
                "expr": "increase(church_chat_conversations_started_total[24h])",
                "refId": "A"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {"mode": "palette-classic"},
                "custom": {"displayMode": "basic"},
                "unit": "short"
              }
            }
          },
          {
            "id": 2,
            "title": "Prayer Requests (24h)",
            "type": "stat",
            "gridPos": {"h": 6, "w": 6, "x": 6, "y": 0},
            "targets": [
              {
                "expr": "increase(church_prayer_requests_submitted_total[24h])",
                "refId": "A"
              }
            ]
          },
          {
            "id": 3,
            "title": "Visit Confirmations (24h)",
            "type": "stat",
            "gridPos": {"h": 6, "w": 6, "x": 12, "y": 0},
            "targets": [
              {
                "expr": "increase(church_visit_confirmations_total[24h])",
                "refId": "A"
              }
            ]
          },
          {
            "id": 4,
            "title": "Event Registrations (24h)",
            "type": "stat",
            "gridPos": {"h": 6, "w": 6, "x": 18, "y": 0},
            "targets": [
              {
                "expr": "increase(church_event_registrations_total[24h])",
                "refId": "A"
              }
            ]
          },
          {
            "id": 5,
            "title": "Chat Response Times by Tenant",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 6},
            "targets": [
              {
                "expr": "histogram_quantile(0.95, rate(church_chat_response_duration_seconds_bucket[5m])) by (tenant_id)",
                "refId": "A",
                "legendFormat": "{{tenant_id}}"
              }
            ]
          },
          {
            "id": 6,
            "title": "OpenAI Token Usage",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 6},
            "targets": [
              {
                "expr": "rate(church_openai_tokens_used_total[5m]) by (type)",
                "refId": "A",
                "legendFormat": "{{type}}"
              }
            ]
          },
          {
            "id": 7,
            "title": "Email/SMS Delivery Rates",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 14},
            "targets": [
              {
                "expr": "rate(church_emails_delivered_total[5m]) / rate(church_emails_sent_total[5m]) * 100",
                "refId": "A",
                "legendFormat": "Email Delivery Rate %"
              },
              {
                "expr": "(rate(church_sms_sent_total[5m]) - rate(church_sms_delivery_failures_total[5m])) / rate(church_sms_sent_total[5m]) * 100",
                "refId": "B",
                "legendFormat": "SMS Success Rate %"
              }
            ]
          },
          {
            "id": 8,
            "title": "Tenant Resource Usage",
            "type": "heatmap",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 14},
            "targets": [
              {
                "expr": "church_tenant_resource_usage_percent",
                "refId": "A",
                "legendFormat": "{{tenant_id}}"
              }
            ]
          },
          {
            "id": 9,
            "title": "Prayer Request Status Distribution",
            "type": "piechart",
            "gridPos": {"h": 8, "w": 8, "x": 0, "y": 22},
            "targets": [
              {
                "expr": "church_prayer_requests_pending_count",
                "refId": "A",
                "legendFormat": "Pending"
              }
            ]
          },
          {
            "id": 10,
            "title": "Visit Confirmation Rate by Type",
            "type": "bargraph",
            "gridPos": {"h": 8, "w": 8, "x": 8, "y": 22},
            "targets": [
              {
                "expr": "rate(church_visit_confirmations_total[1h]) / rate(church_visit_requests_total[1h]) * 100 by (visit_type)",
                "refId": "A",
                "legendFormat": "{{visit_type}}"
              }
            ]
          },
          {
            "id": 11,
            "title": "Follow-up Sequence Performance",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 8, "x": 16, "y": 22},
            "targets": [
              {
                "expr": "church_follow_up_sequences_stalled_count",
                "refId": "A",
                "legendFormat": "Stalled Sequences"
              }
            ]
          }
        ]
      }
    },
    {
      "dashboard": {
        "id": null,
        "title": "Security & Compliance Dashboard",
        "tags": ["visionary-church", "security"],
        "timezone": "browser",
        "schemaVersion": 30,
        "version": 1,
        "refresh": "15s",
        "time": {
          "from": "now-1h",
          "to": "now"
        },
        "panels": [
          {
            "id": 1,
            "title": "Security Threat Level",
            "type": "gauge",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
            "targets": [
              {
                "expr": "rate(church_failed_login_attempts_total[5m]) * 60",
                "refId": "A",
                "legendFormat": "Failed Logins/min"
              },
              {
                "expr": "rate(church_api_unauthorized_requests_total[5m]) * 60",
                "refId": "B",
                "legendFormat": "Unauthorized Requests/min"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {"mode": "thresholds"},
                "thresholds": {
                  "steps": [
                    {"color": "green", "value": null},
                    {"color": "yellow", "value": 10},
                    {"color": "red", "value": 50}
                  ]
                },
                "unit": "reqps"
              }
            }
          },
          {
            "id": 2,
            "title": "Failed Login Attempts by IP",
            "type": "table",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
            "targets": [
              {
                "expr": "topk(10, sum(rate(church_failed_login_attempts_total[5m])) by (source_ip))",
                "refId": "A",
                "format": "table"
              }
            ]
          },
          {
            "id": 3,
            "title": "API Request Rate by Endpoint",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
            "targets": [
              {
                "expr": "topk(5, sum(rate(http_requests_total{job=\"church-api\"}[5m])) by (route))",
                "refId": "A",
                "legendFormat": "{{route}}"
              }
            ]
          },
          {
            "id": 4,
            "title": "DDoS Detection - Request Spikes",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
            "targets": [
              {
                "expr": "rate(http_requests_total{job=\"church-api\"}[1m])",
                "refId": "A",
                "legendFormat": "Requests/sec"
              }
            ],
            "alert": {
              "conditions": [
                {
                  "evaluator": {"params": [1000], "type": "gt"},
                  "operator": {"type": "and"},
                  "query": {"params": ["A", "1m", "now"]},
                  "reducer": {"params": [], "type": "avg"},
                  "type": "query"
                }
              ],
              "executionErrorState": "alerting",
              "frequency": "30s",
              "handler": 1,
              "name": "Potential DDoS Attack",
              "noDataState": "no_data",
              "notifications": []
            }
          },
          {
            "id": 5,
            "title": "SSL Certificate Status",
            "type": "stat",
            "gridPos": {"h": 6, "w": 8, "x": 0, "y": 16},
            "targets": [
              {
                "expr": "(x509_cert_expiry - time()) / 86400",
                "refId": "A",
                "legendFormat": "Days until expiry"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {"mode": "thresholds"},
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": null},
                    {"color": "yellow", "value": 30},
                    {"color": "green", "value": 90}
                  ]
                },
                "unit": "d"
              }
            }
          },
          {
            "id": 6,
            "title": "SQL Injection Attempts",
            "type": "stat",
            "gridPos": {"h": 6, "w": 8, "x": 8, "y": 16},
            "targets": [
              {
                "expr": "increase(church_sql_injection_attempts_total[1h])",
                "refId": "A"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {"mode": "thresholds"},
                "thresholds": {
                  "steps": [
                    {"color": "green", "value": null},
                    {"color": "red", "value": 1}
                  ]
                }
              }
            }
          },
          {
            "id": 7,
            "title": "Rate Limiting Events",
            "type": "timeseries",
            "gridPos": {"h": 6, "w": 8, "x": 16, "y": 16},
            "targets": [
              {
                "expr": "rate(church_tenant_rate_limit_exceeded_total[5m])",
                "refId": "A",
                "legendFormat": "Rate limits exceeded/sec"
              }
            ]
          }
        ]
      }
    },
    {
      "dashboard": {
        "id": null,
        "title": "Multi-Tenant Performance Dashboard",
        "tags": ["visionary-church", "multi-tenant"],
        "timezone": "browser",
        "schemaVersion": 30,
        "version": 1,
        "refresh": "30s",
        "time": {
          "from": "now-1h",
          "to": "now"
        },
        "panels": [
          {
            "id": 1,
            "title": "Tenant Resource Distribution",
            "type": "piechart",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
            "targets": [
              {
                "expr": "church_tenant_resource_usage_percent",
                "refId": "A",
                "legendFormat": "{{tenant_id}}"
              }
            ]
          },
          {
            "id": 2,
            "title": "Database Connections by Tenant",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
            "targets": [
              {
                "expr": "church_tenant_db_connections",
                "refId": "A",
                "legendFormat": "{{tenant_id}}"
              }
            ]
          },
          {
            "id": 3,
            "title": "Storage Usage by Tenant",
            "type": "bargraph",
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
            "targets": [
              {
                "expr": "church_tenant_storage_usage_percent",
                "refId": "A",
                "legendFormat": "{{tenant_id}}"
              }
            ]
          },
          {
            "id": 4,
            "title": "API Usage by Tenant",
            "type": "timeseries",
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
            "targets": [
              {
                "expr": "rate(http_requests_total{job=\"church-api\"}[5m]) by (tenant_id)",
                "refId": "A",
                "legendFormat": "{{tenant_id}}"
              }
            ]
          },
          {
            "id": 5,
            "title": "Response Time Distribution by Tenant",
            "type": "heatmap",
            "gridPos": {"h": 8, "w": 24, "x": 0, "y": 16},
            "targets": [
              {
                "expr": "histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) by (tenant_id)",
                "refId": "A",
                "legendFormat": "{{tenant_id}}"
              }
            ]
          }
        ]
      }
    }
  ]
}